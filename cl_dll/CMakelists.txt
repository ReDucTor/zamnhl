add_library(client SHARED
	ammo.cpp
	ammo_secondary.cpp
	ammohistory.cpp
	battery.cpp
	cdll_int.cpp
	com_weapons.cpp
	death.cpp
	demo.cpp
	entity.cpp
	ev_hldm.cpp
	ev_common.cpp
	events.cpp
	flashlight.cpp
	GameStudioModelRenderer.cpp
	geiger.cpp
	health.cpp
	hud.cpp
	hud_bench.cpp
	hud_benchtrace.cpp
	hud_msg.cpp
	hud_redraw.cpp
	hud_servers.cpp
	hud_spectator.cpp
	hud_update.cpp
	in_camera.cpp
	input.cpp
	inputw32.cpp
	interpolation.cpp
	menu.cpp
	message.cpp
	saytext.cpp
	status_icons.cpp
	statusbar.cpp
	studio_util.cpp
	StudioModelRenderer.cpp
	text_message.cpp
	train.cpp
	tri.cpp
	util.cpp
	vgui_ClassMenu.cpp
	vgui_ControlConfigPanel.cpp
	vgui_CustomObjects.cpp
	vgui_int.cpp
	vgui_MOTDWindow.cpp
	vgui_SchemeManager.cpp
	vgui_ScorePanel.cpp
	vgui_ServerBrowser.cpp
	vgui_SpectatorPanel.cpp
	vgui_TeamFortressViewport.cpp
	vgui_TeamMenu.cpp
	view.cpp
	voice_status.cpp

	hl/hl_baseentity.cpp
	hl/hl_events.cpp
	hl/hl_objects.cpp
	hl/hl_weapons.cpp

	../public/interface.cpp

	../common/parsemsg.cpp

	../pm_shared/pm_debug.cpp
	../pm_shared/pm_math.cpp
	../pm_shared/pm_shared.cpp

	../game_shared/vgui_checkbutton2.cpp
	../game_shared/vgui_grid.cpp
	../game_shared/vgui_helpers.cpp
	../game_shared/vgui_listbox.cpp
	../game_shared/vgui_loadtga.cpp
	../game_shared/vgui_scrollbar2.cpp
	../game_shared/vgui_slider2.cpp
	../game_shared/voice_banmgr.cpp

	../dlls/crossbow.cpp
	../dlls/crowbar.cpp
	../dlls/egon.cpp
	../dlls/gauss.cpp
	../dlls/handgrenade.cpp
	../dlls/wpn_shared/hl_wpn_glock.cpp
	../dlls/hornetgun.cpp
	../dlls/mp5.cpp
	../dlls/python.cpp
	../dlls/rpg.cpp
	../dlls/satchel.cpp
	../dlls/shotgun.cpp
	../dlls/squeakgrenade.cpp
	../dlls/tripmine.cpp
)

target_include_directories(client PRIVATE
	${CMAKE_CURRENT_SOURCE_DIR}/../dlls
	${CMAKE_CURRENT_SOURCE_DIR}/../tfc
	${CMAKE_CURRENT_SOURCE_DIR}/../public
	${CMAKE_CURRENT_SOURCE_DIR}/../common
	${CMAKE_CURRENT_SOURCE_DIR}/../pm_shared
	${CMAKE_CURRENT_SOURCE_DIR}/../engine
	${CMAKE_CURRENT_SOURCE_DIR}/../utils/vgui/include
	${CMAKE_CURRENT_SOURCE_DIR}/../game_shared
	${CMAKE_CURRENT_SOURCE_DIR}/../external
)

target_compile_definitions(client PRIVATE
	-DCLIENT_DLL
	-DCLIENT_WEAPONS
	-DHL_DLL
)

target_link_libraries(client PRIVATE
	# This is just asking for a world of ABI pain
	${CMAKE_CURRENT_SOURCE_DIR}/../utils/vgui/lib/win32_vc6/vgui.lib
	${CMAKE_CURRENT_SOURCE_DIR}/../lib/public/sdl2.lib
	wsock32.lib
)

GET_FILENAME_COMPONENT(HL_MOD_INSTALL_PATH "[HKEY_CURRENT_USER\\Software\\Valve\\Steam;ModInstallPath]"
						ABSOLUTE CACHE)

set_target_properties(client PROPERTIES
	VS_DEBUGGER_COMMAND ${HL_MOD_INSTALL_PATH}/hl.exe -game zamnhl
)
